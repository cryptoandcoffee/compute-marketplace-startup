version: '3.8'
services:
  akash:
    image: ghcr.io/akash-network/cosmos-omnibus:v0.4.10-akash-v0.32.1
    container_name: akash
    ports:
      - '26656:26656'
      - '26657:26657'
      - '1317:1317'
    environment:
      - MONIKER=node_1
      - CHAIN_JSON=https://raw.githubusercontent.com/akash-network/net/main/mainnet/meta.json
      - MINIMUM_GAS_PRICES=0uakt
      - FASTSYNC_VERSION=v0
      - P2P_POLKACHU=1
      - STATESYNC_POLKACHU=1
      - AKASH_API_ENABLE=true
      - AKASH_FILTER_PEERS=true
      - AKASH_P2P_PEX=true
    volumes:
      - ./node-data:/root/.akash

  flask_app:
    build: ./flask_app
    container_name: flask
    ports:
      - "5000:5000"
    depends_on:
      - akash
    environment:
      - LOCAL_NODE_RPC_URL=http://akash:26657

